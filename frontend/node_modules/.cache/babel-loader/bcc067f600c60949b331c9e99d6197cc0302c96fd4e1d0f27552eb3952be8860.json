{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/stock/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{getBlanks}from'../../requests';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddBook(_ref){let{setShown,requestFunction,initialData={}}=_ref;const{blank_id,material_name,part_name,total_quantity}=initialData;const[newData,setNewData]=useState({material_name:material_name||'',part_name:part_name||'',total_quantity:total_quantity||''});const[BlanksList,setBlanksList]=useState([]);useEffect(()=>{getBlanks(setBlanksList);},[]);const handleChange=e=>{const{name,value}=e.target;setNewData(prevData=>_objectSpread(_objectSpread({},prevData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!blank_id){const isBookExists=BlanksList.some(book=>book.material_name.toLowerCase()===newData.material_name.toLowerCase()&&book.part_name.toLowerCase()===newData.part_name.toLowerCase());if(isBookExists){alert('Такая заготовка уже есть.');return;}}const res=await requestFunction(newData,blank_id);if(res===200){setShown(false);window.location.reload();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-block\",children:[/*#__PURE__*/_jsx(\"h2\",{children:blank_id?\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043E \\u0437\\u0430\\u0433\\u043E\\u0442\\u043E\\u0432\\u043A\\u0435\":\"Добавление заготовки\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"material_name\",children:\"\\u041C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B\"}),/*#__PURE__*/_jsx(\"input\",{name:\"material_name\",type:\"text\",value:newData.material_name,placeholder:\"\\u0427\\u0443\\u0433\\u0443\\u043D\",onChange:e=>handleChange(e),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"part_name\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{name:\"part_name\",type:\"text\",value:newData.part_name,placeholder:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\",onChange:e=>handleChange(e),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"total_quantity\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{name:\"total_quantity\",type:\"number\",placeholder:\"1\",value:newData.total_quantity,min:\"1\",onChange:e=>handleChange(e),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-block\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"grey-button\",type:\"chancel\",onClick:()=>setShown(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filed-button\",type:\"submit\",children:blank_id?\"Сохранить\":\"Добавить\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","getBlanks","jsx","_jsx","jsxs","_jsxs","AddBook","_ref","setShown","requestFunction","initialData","blank_id","material_name","part_name","total_quantity","newData","setNewData","BlanksList","setBlanksList","handleChange","e","name","value","target","prevData","_objectSpread","handleSubmit","preventDefault","isBookExists","some","book","toLowerCase","alert","res","window","location","reload","className","children","onSubmit","htmlFor","type","placeholder","onChange","required","min","onClick"],"sources":["C:/Users/Admin/Desktop/stock/frontend/src/components/forms/AddBook.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getBlanks } from '../../requests';\r\n\r\nexport default function AddBook({setShown, requestFunction, initialData={}}) {\r\n    const { blank_id, material_name, part_name, total_quantity } = initialData;\r\n    const [newData, setNewData] = useState({\r\n        material_name: material_name || '',\r\n        part_name: part_name || '',\r\n        total_quantity: total_quantity || '',\r\n    })\r\n\r\n    const [BlanksList, setBlanksList] = useState([]);\r\n\r\n    useEffect(() => {\r\n        getBlanks(setBlanksList);\r\n    }, [])\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setNewData((prevData) => ({\r\n            ...prevData,\r\n            [name]: value,\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if(!blank_id){\r\n            const isBookExists = BlanksList.some(\r\n                (book) =>\r\n                    book.material_name.toLowerCase() === newData.material_name.toLowerCase() &&\r\n                    book.part_name.toLowerCase() === newData.part_name.toLowerCase()\r\n            );\r\n    \r\n            if (isBookExists) {\r\n                alert('Такая заготовка уже есть.');\r\n                return; \r\n            }\r\n        }\r\n\r\n        const res = await requestFunction(newData, blank_id);\r\n\r\n        if (res === 200) {\r\n            setShown(false);\r\n            window.location.reload();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"form-block\">\r\n            <h2>{blank_id?`Редактирование данных о заготовке`:\"Добавление заготовки\"}</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-input-block\">\r\n                    <label htmlFor=\"material_name\">Материал</label>\r\n                    <input\r\n                        name=\"material_name\"\r\n                        type=\"text\"\r\n                        value={newData.material_name}\r\n                        placeholder=\"Чугун\"\r\n                        onChange={(e) => handleChange(e)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-input-block\">\r\n                    <label htmlFor=\"part_name\">Название</label>\r\n                    <input\r\n                        name=\"part_name\"\r\n                        type=\"text\"\r\n                        value={newData.part_name}\r\n                        placeholder=\"Наименование\"\r\n                        onChange={(e) => handleChange(e)}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"form-input-block\">\r\n                    <label htmlFor=\"total_quantity\">Количество</label>\r\n                    <input\r\n                        name=\"total_quantity\"\r\n                        type=\"number\"\r\n                        placeholder='1'\r\n                        value={newData.total_quantity}\r\n                        min=\"1\"\r\n                        onChange={(e) => handleChange(e)}\r\n                        required\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"buttons-block\">\r\n                    <button className=\"grey-button\" type=\"chancel\" onClick={() => setShown(false)}>Отменить</button>\r\n                    <button className=\"filed-button\" type=\"submit\">{blank_id?\"Сохранить\":\"Добавить\"}</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"0HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,cAAe,SAAS,CAAAC,OAAOA,CAAAC,IAAA,CAA8C,IAA7C,CAACC,QAAQ,CAAEC,eAAe,CAAEC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAAH,IAAA,CACvE,KAAM,CAAEI,QAAQ,CAAEC,aAAa,CAAEC,SAAS,CAAEC,cAAe,CAAC,CAAGJ,WAAW,CAC1E,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,CACnCa,aAAa,CAAEA,aAAa,EAAI,EAAE,CAClCC,SAAS,CAAEA,SAAS,EAAI,EAAE,CAC1BC,cAAc,CAAEA,cAAc,EAAI,EACtC,CAAC,CAAC,CAEF,KAAM,CAACG,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACZC,SAAS,CAACiB,aAAa,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CACxB,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCP,UAAU,CAAEQ,QAAQ,EAAAC,aAAA,CAAAA,aAAA,IACbD,QAAQ,MACX,CAACH,IAAI,EAAGC,KAAK,EACf,CAAC,CACP,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAO,CAAAN,CAAC,EAAK,CAC9BA,CAAC,CAACO,cAAc,CAAC,CAAC,CAElB,GAAG,CAAChB,QAAQ,CAAC,CACT,KAAM,CAAAiB,YAAY,CAAGX,UAAU,CAACY,IAAI,CAC/BC,IAAI,EACDA,IAAI,CAAClB,aAAa,CAACmB,WAAW,CAAC,CAAC,GAAKhB,OAAO,CAACH,aAAa,CAACmB,WAAW,CAAC,CAAC,EACxED,IAAI,CAACjB,SAAS,CAACkB,WAAW,CAAC,CAAC,GAAKhB,OAAO,CAACF,SAAS,CAACkB,WAAW,CAAC,CACvE,CAAC,CAED,GAAIH,YAAY,CAAE,CACdI,KAAK,CAAC,2BAA2B,CAAC,CAClC,OACJ,CACJ,CAEA,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAxB,eAAe,CAACM,OAAO,CAAEJ,QAAQ,CAAC,CAEpD,GAAIsB,GAAG,GAAK,GAAG,CAAE,CACbzB,QAAQ,CAAC,KAAK,CAAC,CACf0B,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CACJ,CAAC,CAED,mBACI/B,KAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBnC,IAAA,OAAAmC,QAAA,CAAK3B,QAAQ,2LAAqC,sBAAsB,CAAK,CAAC,cAC9EN,KAAA,SAAMkC,QAAQ,CAAEb,YAAa,CAAAY,QAAA,eACzBjC,KAAA,QAAKgC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BnC,IAAA,UAAOqC,OAAO,CAAC,eAAe,CAAAF,QAAA,CAAC,kDAAQ,CAAO,CAAC,cAC/CnC,IAAA,UACIkB,IAAI,CAAC,eAAe,CACpBoB,IAAI,CAAC,MAAM,CACXnB,KAAK,CAAEP,OAAO,CAACH,aAAc,CAC7B8B,WAAW,CAAC,gCAAO,CACnBC,QAAQ,CAAGvB,CAAC,EAAKD,YAAY,CAACC,CAAC,CAAE,CACjCwB,QAAQ,MACX,CAAC,EACD,CAAC,cACNvC,KAAA,QAAKgC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BnC,IAAA,UAAOqC,OAAO,CAAC,WAAW,CAAAF,QAAA,CAAC,kDAAQ,CAAO,CAAC,cAC3CnC,IAAA,UACIkB,IAAI,CAAC,WAAW,CAChBoB,IAAI,CAAC,MAAM,CACXnB,KAAK,CAAEP,OAAO,CAACF,SAAU,CACzB6B,WAAW,CAAC,0EAAc,CAC1BC,QAAQ,CAAGvB,CAAC,EAAKD,YAAY,CAACC,CAAC,CAAE,CACjCwB,QAAQ,MACX,CAAC,EACD,CAAC,cACNvC,KAAA,QAAKgC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BnC,IAAA,UAAOqC,OAAO,CAAC,gBAAgB,CAAAF,QAAA,CAAC,8DAAU,CAAO,CAAC,cAClDnC,IAAA,UACIkB,IAAI,CAAC,gBAAgB,CACrBoB,IAAI,CAAC,QAAQ,CACbC,WAAW,CAAC,GAAG,CACfpB,KAAK,CAAEP,OAAO,CAACD,cAAe,CAC9B+B,GAAG,CAAC,GAAG,CACPF,QAAQ,CAAGvB,CAAC,EAAKD,YAAY,CAACC,CAAC,CAAE,CACjCwB,QAAQ,MACX,CAAC,EACD,CAAC,cAENvC,KAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC1BnC,IAAA,WAAQkC,SAAS,CAAC,aAAa,CAACI,IAAI,CAAC,SAAS,CAACK,OAAO,CAAEA,CAAA,GAAMtC,QAAQ,CAAC,KAAK,CAAE,CAAA8B,QAAA,CAAC,kDAAQ,CAAQ,CAAC,cAChGnC,IAAA,WAAQkC,SAAS,CAAC,cAAc,CAACI,IAAI,CAAC,QAAQ,CAAAH,QAAA,CAAE3B,QAAQ,CAAC,WAAW,CAAC,UAAU,CAAS,CAAC,EACxF,CAAC,EACJ,CAAC,EACN,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}