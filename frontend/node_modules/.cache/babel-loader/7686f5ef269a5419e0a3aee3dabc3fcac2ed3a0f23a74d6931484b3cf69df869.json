{"ast":null,"code":"import{useState}from\"react\";import{deleteReader,editReader}from\"../../requests\";import InnerCard from\"./InnerCard\";import AddReader from\"../forms/AddReader\";import IssueBook from\"../forms/IssueBook\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(_ref){let{data,dataAll,setDataAll,countIssuedBlanks,hasIssuedBook}=_ref;const{supplier_id,supplier_name,Blanks}=data;const[edit,setEdit]=useState(false);const[add,setAdd]=useState(false);const readerData={supplier_id:supplier_id,supplier_name:supplier_name};const handleDeleteReader=async id=>{if(window.confirm(\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0447\\u0438\\u0442\\u0430\\u0442\\u0435\\u043B\\u044F \\\"\".concat(supplier_name,\"\\\"?\"))){const res=await deleteReader(id);if(res){setDataAll(dataAll.filter(element=>element.supplier_id!==id));}alert(res.message);}};return/*#__PURE__*/_jsxs(\"div\",{id:supplier_id,className:\"card-block\",children:[edit?/*#__PURE__*/_jsx(AddReader,{setShown:setEdit,requestFunction:editReader,initialData:data}):/*#__PURE__*/_jsx(\"div\",{className:\"card-block-title\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"card-block-title-name\",title:supplier_name,children:supplier_name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-block-subitems\",children:[/*#__PURE__*/_jsx(\"h3\",{children:Blanks.length>0?\"Доставленные заготовки\":\"Нет доставленных заготовок \"}),Blanks.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"card-block-subitems-list\",children:Blanks.map((element,index)=>{return/*#__PURE__*/_jsx(InnerCard,{data:element,readerData:readerData,dataAll:dataAll,setDataAll:setDataAll,countIssuedBlanks:countIssuedBlanks,hasIssuedBook:hasIssuedBook},index);})}):\"\",add&&/*#__PURE__*/_jsx(IssueBook,{setShown:setAdd,readerData:readerData,countIssuedBlanks:countIssuedBlanks,hasIssuedBook:hasIssuedBook})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-block\",children:[!add&&/*#__PURE__*/_jsx(\"button\",{className:\"unfiled-button\",onClick:()=>setAdd(true),children:\"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \\u0437\\u0430\\u0433\\u043E\\u0442\\u043E\\u0432\\u043A\\u0438\"}),!edit&&!add&&/*#__PURE__*/_jsx(\"button\",{className:\"grey-button\",onClick:()=>setEdit(true),children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),!add&&/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteReader(supplier_id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]});}","map":{"version":3,"names":["useState","deleteReader","editReader","InnerCard","AddReader","IssueBook","jsx","_jsx","jsxs","_jsxs","Card","_ref","data","dataAll","setDataAll","countIssuedBlanks","hasIssuedBook","supplier_id","supplier_name","Blanks","edit","setEdit","add","setAdd","readerData","handleDeleteReader","id","window","confirm","concat","res","filter","element","alert","message","className","children","setShown","requestFunction","initialData","title","length","map","index","onClick"],"sources":["C:/Users/Admin/Desktop/stock/frontend/src/components/ui/Card.jsx"],"sourcesContent":["import { useState } from \"react\"\r\n\r\nimport { deleteReader, editReader} from \"../../requests\";\r\nimport InnerCard from \"./InnerCard\";\r\nimport AddReader from \"../forms/AddReader\";\r\nimport IssueBook from \"../forms/IssueBook\";\r\n\r\nexport default function Card({data, dataAll, setDataAll, countIssuedBlanks, hasIssuedBook}) {\r\n    const { supplier_id, supplier_name, Blanks} = data;\r\n    const [edit, setEdit] = useState(false);\r\n    const [add, setAdd] = useState(false);\r\n\r\n    const readerData = {\r\n        supplier_id: supplier_id,\r\n        supplier_name: supplier_name\r\n    }\r\n\r\n    const handleDeleteReader = async (id) => {\r\n        if (window.confirm(`Вы уверены, что хотите удалить читателя \"${supplier_name}\"?`)) {\r\n            const res = await deleteReader(id);\r\n            if(res){\r\n                setDataAll(dataAll.filter((element) => element.supplier_id !== id));\r\n            }\r\n            alert(res.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div id={supplier_id} className=\"card-block\">\r\n            {edit?(\r\n                <AddReader setShown={setEdit} requestFunction={editReader} initialData={data}/>\r\n            ):(\r\n                <div className=\"card-block-title\">\r\n                    <h2 className=\"card-block-title-name\" title={supplier_name}>{supplier_name}</h2>                        \r\n                </div>\r\n            )}\r\n            <div className=\"card-block-subitems\">\r\n                <h3>{Blanks.length > 0?\"Доставленные заготовки\":\"Нет доставленных заготовок \"}</h3>\r\n                {Blanks.length > 0?(\r\n                    <div className=\"card-block-subitems-list\">\r\n                        {Blanks.map((element, index) => {\r\n                            return (\r\n                                <InnerCard key={index} data={element} readerData={readerData} dataAll={dataAll} setDataAll={setDataAll} countIssuedBlanks={countIssuedBlanks} hasIssuedBook={hasIssuedBook}/>\r\n                            )\r\n                        })}\r\n\r\n                    </div>\r\n                ):(\"\")}\r\n                {add && (\r\n                    <IssueBook setShown={setAdd} readerData={readerData} countIssuedBlanks={countIssuedBlanks} hasIssuedBook={hasIssuedBook}/>\r\n                )}\r\n            </div>\r\n            <div className=\"buttons-block\">\r\n                {!add && (<button className=\"unfiled-button\" onClick={() => setAdd(true)}>Поставка заготовки</button>)}\r\n                {!edit && !add && (<button className=\"grey-button\" onClick={() => setEdit(true)}>Изменить</button>)}\r\n                {!add && <button className=\"delete-button\" onClick={() => handleDeleteReader(supplier_id)}>Удалить</button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}