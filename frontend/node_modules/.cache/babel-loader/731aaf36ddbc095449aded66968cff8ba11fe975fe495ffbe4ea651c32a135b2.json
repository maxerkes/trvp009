{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\stock\\\\frontend\\\\src\\\\components\\\\ui\\\\Card.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { deleteReader, editReader } from \"../../requests\";\nimport InnerCard from \"./InnerCard\";\nimport AddReader from \"../forms/AddReader\";\nimport IssueBook from \"../forms/IssueBook\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Card({\n  data,\n  dataAll,\n  setDataAll,\n  countIssuedBlanks,\n  hasIssuedBook\n}) {\n  _s();\n  const {\n    supplier_id,\n    supplier_name,\n    supplier_date,\n    Blanks\n  } = data;\n  const [edit, setEdit] = useState(false);\n  const [add, setAdd] = useState(false);\n\n  // Convert the supplier_date from DD/MM/YYYY to a Date object\n  const [day, month, year] = supplier_date.split('/');\n  const supplierDateObj = new Date(`${year}-${month}-${day}`);\n\n  // Check if the supplier_date is not less than the current date\n  const isSupplierDateValid = supplierDateObj >= currentDate;\n\n  // If the supplier_date is invalid, do not render the card\n  if (!isSupplierDateValid) {\n    return null; // Skip rendering this card\n  }\n  const readerData = {\n    supplier_id: supplier_id,\n    supplier_name: supplier_name,\n    supplier_date: supplier_date\n  };\n  const handleDeleteReader = async id => {\n    if (window.confirm(`Вы уверены, что хотите удалить заказчика \"${supplier_name}\"?`)) {\n      const res = await deleteReader(id);\n      if (res) {\n        setDataAll(dataAll.filter(element => element.supplier_id !== id));\n      }\n      alert(res.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: supplier_id,\n    className: \"card-block\",\n    children: [edit ? /*#__PURE__*/_jsxDEV(AddReader, {\n      setShown: setEdit,\n      requestFunction: editReader,\n      initialData: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-block-title\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"card-block-title-name\",\n        title: supplier_name,\n        children: supplier_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-block-date\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"card-block-date-date\",\n        title: supplier_date,\n        children: supplier_date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-block-subitems\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: Blanks.length > 0 ? \"Доставленные заготовки\" : \"Нет доставленных заготовок\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), Blanks.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-block-subitems-list\",\n        children: Blanks.map((element, index) => {\n          return /*#__PURE__*/_jsxDEV(InnerCard, {\n            data: element,\n            readerData: readerData,\n            dataAll: dataAll,\n            setDataAll: setDataAll,\n            countIssuedBlanks: countIssuedBlanks,\n            hasIssuedBook: hasIssuedBook\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this) : \"\", add && /*#__PURE__*/_jsxDEV(IssueBook, {\n        setShown: setAdd,\n        readerData: readerData,\n        countIssuedBlanks: countIssuedBlanks,\n        hasIssuedBook: hasIssuedBook\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttons-block\",\n      children: [!add && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"unfiled-button\",\n        onClick: () => setAdd(true),\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u0433\\u043E\\u0442\\u043E\\u0432\\u043A\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), !edit && !add && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"grey-button\",\n        onClick: () => setEdit(true),\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), !add && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-button\",\n        onClick: () => handleDeleteReader(supplier_id),\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Card, \"sGxjhpjGmZ2adjuZk9Idos5ot3w=\");\n_c = Card;\nvar _c;\n$RefreshReg$(_c, \"Card\");","map":{"version":3,"names":["useState","useEffect","deleteReader","editReader","InnerCard","AddReader","IssueBook","jsxDEV","_jsxDEV","Card","data","dataAll","setDataAll","countIssuedBlanks","hasIssuedBook","_s","supplier_id","supplier_name","supplier_date","Blanks","edit","setEdit","add","setAdd","day","month","year","split","supplierDateObj","Date","isSupplierDateValid","currentDate","readerData","handleDeleteReader","id","window","confirm","res","filter","element","alert","message","className","children","setShown","requestFunction","initialData","fileName","_jsxFileName","lineNumber","columnNumber","title","length","map","index","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/stock/frontend/src/components/ui/Card.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { deleteReader, editReader } from \"../../requests\";\r\nimport InnerCard from \"./InnerCard\";\r\nimport AddReader from \"../forms/AddReader\";\r\nimport IssueBook from \"../forms/IssueBook\";\r\n\r\nexport default function Card({ data, dataAll, setDataAll, countIssuedBlanks, hasIssuedBook}) {\r\n  const { supplier_id, supplier_name, supplier_date, Blanks } = data;\r\n  const [edit, setEdit] = useState(false);\r\n  const [add, setAdd] = useState(false);\r\n\r\n  // Convert the supplier_date from DD/MM/YYYY to a Date object\r\n  const [day, month, year] = supplier_date.split('/');\r\n  const supplierDateObj = new Date(`${year}-${month}-${day}`);\r\n\r\n  // Check if the supplier_date is not less than the current date\r\n  const isSupplierDateValid = supplierDateObj >= currentDate;\r\n\r\n  // If the supplier_date is invalid, do not render the card\r\n  if (!isSupplierDateValid) {\r\n    return null; // Skip rendering this card\r\n  }\r\n\r\n  const readerData = {\r\n    supplier_id: supplier_id,\r\n    supplier_name: supplier_name,\r\n    supplier_date: supplier_date,\r\n  };\r\n\r\n  const handleDeleteReader = async (id) => {\r\n    if (window.confirm(`Вы уверены, что хотите удалить заказчика \"${supplier_name}\"?`)) {\r\n      const res = await deleteReader(id);\r\n      if (res) {\r\n        setDataAll(dataAll.filter((element) => element.supplier_id !== id));\r\n      }\r\n      alert(res.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id={supplier_id} className=\"card-block\">\r\n      {edit ? (\r\n        <AddReader setShown={setEdit} requestFunction={editReader} initialData={data} />\r\n      ) : (\r\n        <div className=\"card-block-title\">\r\n          <h2 className=\"card-block-title-name\" title={supplier_name}>\r\n            {supplier_name}\r\n          </h2>\r\n        </div>\r\n      )}\r\n      <div className=\"card-block-date\">\r\n        <h2 className=\"card-block-date-date\" title={supplier_date}>\r\n          {supplier_date}\r\n        </h2>\r\n      </div>\r\n      <div className=\"card-block-subitems\">\r\n        <h3>{Blanks.length > 0 ? \"Доставленные заготовки\" : \"Нет доставленных заготовок\"}</h3>\r\n        {Blanks.length > 0 ? (\r\n          <div className=\"card-block-subitems-list\">\r\n            {Blanks.map((element, index) => {\r\n              return (\r\n                <InnerCard\r\n                  key={index}\r\n                  data={element}\r\n                  readerData={readerData}\r\n                  dataAll={dataAll}\r\n                  setDataAll={setDataAll}\r\n                  countIssuedBlanks={countIssuedBlanks}\r\n                  hasIssuedBook={hasIssuedBook}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {add && (\r\n          <IssueBook\r\n            setShown={setAdd}\r\n            readerData={readerData}\r\n            countIssuedBlanks={countIssuedBlanks}\r\n            hasIssuedBook={hasIssuedBook}\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"buttons-block\">\r\n        {!add && (\r\n          <button className=\"unfiled-button\" onClick={() => setAdd(true)}>\r\n            Добавить заготовку\r\n          </button>\r\n        )}\r\n        {!edit && !add && (\r\n          <button className=\"grey-button\" onClick={() => setEdit(true)}>\r\n            Изменить\r\n          </button>\r\n        )}\r\n        {!add && (\r\n          <button className=\"delete-button\" onClick={() => handleDeleteReader(supplier_id)}>\r\n            Удалить\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,YAAY,EAAEC,UAAU,QAAQ,gBAAgB;AACzD,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,OAAOC,SAAS,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,eAAe,SAASC,IAAIA,CAAC;EAAEC,IAAI;EAAEC,OAAO;EAAEC,UAAU;EAAEC,iBAAiB;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EAC3F,MAAM;IAAEC,WAAW;IAAEC,aAAa;IAAEC,aAAa;IAAEC;EAAO,CAAC,GAAGT,IAAI;EAClE,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACsB,GAAG,EAAEC,MAAM,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;;EAErC;EACA,MAAM,CAACwB,GAAG,EAAEC,KAAK,EAAEC,IAAI,CAAC,GAAGR,aAAa,CAACS,KAAK,CAAC,GAAG,CAAC;EACnD,MAAMC,eAAe,GAAG,IAAIC,IAAI,CAAC,GAAGH,IAAI,IAAID,KAAK,IAAID,GAAG,EAAE,CAAC;;EAE3D;EACA,MAAMM,mBAAmB,GAAGF,eAAe,IAAIG,WAAW;;EAE1D;EACA,IAAI,CAACD,mBAAmB,EAAE;IACxB,OAAO,IAAI,CAAC,CAAC;EACf;EAEA,MAAME,UAAU,GAAG;IACjBhB,WAAW,EAAEA,WAAW;IACxBC,aAAa,EAAEA,aAAa;IAC5BC,aAAa,EAAEA;EACjB,CAAC;EAED,MAAMe,kBAAkB,GAAG,MAAOC,EAAE,IAAK;IACvC,IAAIC,MAAM,CAACC,OAAO,CAAC,6CAA6CnB,aAAa,IAAI,CAAC,EAAE;MAClF,MAAMoB,GAAG,GAAG,MAAMnC,YAAY,CAACgC,EAAE,CAAC;MAClC,IAAIG,GAAG,EAAE;QACPzB,UAAU,CAACD,OAAO,CAAC2B,MAAM,CAAEC,OAAO,IAAKA,OAAO,CAACvB,WAAW,KAAKkB,EAAE,CAAC,CAAC;MACrE;MACAM,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC;IACpB;EACF,CAAC;EAED,oBACEjC,OAAA;IAAK0B,EAAE,EAAElB,WAAY;IAAC0B,SAAS,EAAC,YAAY;IAAAC,QAAA,GACzCvB,IAAI,gBACHZ,OAAA,CAACH,SAAS;MAACuC,QAAQ,EAAEvB,OAAQ;MAACwB,eAAe,EAAE1C,UAAW;MAAC2C,WAAW,EAAEpC;IAAK;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,gBAEhF1C,OAAA;MAAKkC,SAAS,EAAC,kBAAkB;MAAAC,QAAA,eAC/BnC,OAAA;QAAIkC,SAAS,EAAC,uBAAuB;QAACS,KAAK,EAAElC,aAAc;QAAA0B,QAAA,EACxD1B;MAAa;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACZ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACN,eACD1C,OAAA;MAAKkC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC9BnC,OAAA;QAAIkC,SAAS,EAAC,sBAAsB;QAACS,KAAK,EAAEjC,aAAc;QAAAyB,QAAA,EACvDzB;MAAa;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACZ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eACN1C,OAAA;MAAKkC,SAAS,EAAC,qBAAqB;MAAAC,QAAA,gBAClCnC,OAAA;QAAAmC,QAAA,EAAKxB,MAAM,CAACiC,MAAM,GAAG,CAAC,GAAG,wBAAwB,GAAG;MAA4B;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACrF/B,MAAM,CAACiC,MAAM,GAAG,CAAC,gBAChB5C,OAAA;QAAKkC,SAAS,EAAC,0BAA0B;QAAAC,QAAA,EACtCxB,MAAM,CAACkC,GAAG,CAAC,CAACd,OAAO,EAAEe,KAAK,KAAK;UAC9B,oBACE9C,OAAA,CAACJ,SAAS;YAERM,IAAI,EAAE6B,OAAQ;YACdP,UAAU,EAAEA,UAAW;YACvBrB,OAAO,EAAEA,OAAQ;YACjBC,UAAU,EAAEA,UAAW;YACvBC,iBAAiB,EAAEA,iBAAkB;YACrCC,aAAa,EAAEA;UAAc,GANxBwC,KAAK;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAOX,CAAC;QAEN,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,GAEN,EACD,EACA5B,GAAG,iBACFd,OAAA,CAACF,SAAS;QACRsC,QAAQ,EAAErB,MAAO;QACjBS,UAAU,EAAEA,UAAW;QACvBnB,iBAAiB,EAAEA,iBAAkB;QACrCC,aAAa,EAAEA;MAAc;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eACN1C,OAAA;MAAKkC,SAAS,EAAC,eAAe;MAAAC,QAAA,GAC3B,CAACrB,GAAG,iBACHd,OAAA;QAAQkC,SAAS,EAAC,gBAAgB;QAACa,OAAO,EAAEA,CAAA,KAAMhC,MAAM,CAAC,IAAI,CAAE;QAAAoB,QAAA,EAAC;MAEhE;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT,EACA,CAAC9B,IAAI,IAAI,CAACE,GAAG,iBACZd,OAAA;QAAQkC,SAAS,EAAC,aAAa;QAACa,OAAO,EAAEA,CAAA,KAAMlC,OAAO,CAAC,IAAI,CAAE;QAAAsB,QAAA,EAAC;MAE9D;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT,EACA,CAAC5B,GAAG,iBACHd,OAAA;QAAQkC,SAAS,EAAC,eAAe;QAACa,OAAO,EAAEA,CAAA,KAAMtB,kBAAkB,CAACjB,WAAW,CAAE;QAAA2B,QAAA,EAAC;MAElF;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACnC,EAAA,CAlGuBN,IAAI;AAAA+C,EAAA,GAAJ/C,IAAI;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}